<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clean Language Report</title>
</head>
<body style="font-family:Helvetica">
<div><div style="position: absolute;"><svg width="355.555555555556" height="177.777777777778">
<path d="M49.7777777777778 7.32929319639176 h280.888888888889 v141.785858051661 h-280.888888888889 Z M64 33.9959598630584 h252.444444444444 v88.4525247183276 h-252.444444444444 Z" stroke="none" fill="#3F87AF" fill-rule="evenodd"/>
<path d="M64 111.781817914719 h252.444444444444 v10.6666666666667 h-252.444444444444 Z" stroke="none" fill="#8C96A0"/>
<path d="M64 33.9959598630584 h252.444444444444 v10.6666666666667 h-252.444444444444 Z" stroke="none" fill="#8C96A0"/>
<path d="M64 44.6626265297251 h252.444444444444 v67.1191913849942 h-252.444444444444 Z" stroke="none" fill="#FFFFFF"/>
<path d="M99.1179703874409 137.550135143052 C93.2711853763986 133.302197180425,88.084448516421 128.213312506961,83.725936053644 122.448484581386 L110.089961763567 122.448484581386 Z" stroke="none" fill="#8C96A0"/>
<path d="M99.1179703874409 18.8943093013927 C93.2711853763986 23.1422472640192,88.084448516421 28.2311319374834,83.725936053644 33.9959598630584 L110.089961763567 33.9959598630584 Z" stroke="none" fill="#8C96A0"/>
<path d="M126.968649704419 100.555210486665 C109.380820468897 87.7769045717629,109.380820468897 61.5564287615705,126.968649704419 48.7781228466684 L116.780371998016 34.7551616108359 C89.6658019265873 54.45504989631,89.6658019265873 94.8782834370233,116.780371998016 114.578171722497 Z" stroke="none" fill="#8C96A0"/>
<path d="M113.645517319123 118.89292902583 C83.5996423751073 97.0633230878727,83.5996423751073 52.2700102454607,113.645517319123 30.4404043075029 L102.673525942996 15.3387537458372 C62.3680839449271 44.6223714674879,62.3680839449271 104.710961865845,102.673525942996 133.994579587496 Z" stroke="none" fill="#8C96A0"/>
<path d="M123.413094148863 104.110766042221 C105.825264913342 91.3324601273184,105.825264913342 65.111984317126,123.413094148863 52.3336784022239 L113.22481644246 38.3107171663915 C86.1102463710318 58.0106054518656,86.1102463710318 98.4338389925788,113.22481644246 118.133727278053  Z" stroke="none" fill="#3F87AF"/>
<path d="M110.089961763567 122.448484581386 C80.0440868195518 100.618878643428,80.0440868195518 55.8255658010162,110.089961763567 33.9959598630584L83.725936053644 33.9959598630584 C63.9432065006372 60.1617750913602,63.9432065006372 96.2826693530842,83.725936053644 122.448484581386" stroke="none" fill="#3F87AF"/>
<text font-family="Helvetica" font-weight="bold" font-size="56.8888888888889px" x="145.777777777778" y="103.111111111111" fill="#8C96A0">Clean</text>
<text font-family="Helvetica" font-weight="bold" font-size="56.8888888888889px" x="144.888888888889" y="102.222222222222" fill="#8C96A0">Clean</text>
<text font-family="Helvetica" font-weight="bold" font-size="56.8888888888889px" x="144" y="101.333333333333" fill="#8C96A0">Clean</text>
<text font-family="Helvetica" font-weight="bold" font-size="56.8888888888889px" x="143.111111111111" y="100.444444444444" fill="#8C96A0">Clean</text>
<text font-family="Helvetica" font-weight="bold" font-size="56.8888888888889px" x="142.222222222222" y="99.5555555555556" fill="#3F87AF">Clean</text>
</svg>
</div><h1 style="text-align:right;background-color:#9999FF;"><a id="_D"><br>Appendix D<br><br>Compiler Extensions</a></h1></div>
<p style="text-align:justify;">This appendix lists extensions and modifications to Clean that are supported by a compiler. Unfortunately they are not yet described in the previous chapters and appendices of this manual.</p>
<h2 style="background-color:#9999FF;"><a id="_D.1">D.1 Clean 3.0 Compiler Extensions</a></h2>
<h3 style="background-color:#9999FF;"><a id="_D.1.1">D.1.1 New imports</a></h3>
<p></p><table style="width:100%;"><tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">Identifiers can be imported qualified by adding <span style="font-family:courier;">qualified</span> after <span style="font-family:courier;">import</span> in the import statement. For example:</td></tr>
</table>
<p></p>
<p style="font-family:courier;margin:0px;background-color:#FFFF99;line-height:1.125;"><span style="font-family:courier;color:#FF0000;"><b>import</b></span>&nbsp;qualified&nbsp;StdList;<br>
<br>
<span style="font-family:courier;color:#FF0000;"><b>from</b></span>&nbsp;StdList&nbsp;<span style="font-family:courier;color:#FF0000;"><b>import</b></span>&nbsp;qualified&nbsp;drop,++;<br><p></p>
<p style="text-align:justify;">Identifiers imported in this way can be used by prefixing the identifier with the module name between single quotes and a dot. If an identifier consists of special characters (for example <span style="font-family:courier;">++</span>) an additional single space is required between the dot and the identifier.</p>
<p></p><div style="background-color:#FFFF45;">For example:</div>
<div style="font-family:courier;margin:0px;background-color:#FFFF99;"><br>
f&nbsp;l&nbsp;=&nbsp;'StdList'.drop&nbsp;1&nbsp;(l&nbsp;'StdList'.&nbsp;++&nbsp;[2]);<br></div>
<p></p><p style="text-align:justify;">Currently field names of records are not imported by an implicit qualified import, but can be imported with an explicit qualified import.</p>
<p style="text-align:justify;">Qualified names may only be used if a qualified import is used, not if the identifier is only imported by a normal (unqualified) import. An identifier may be imported both unqualified and qualified.</p>
<p style="text-align:justify;">Qualified imports may be used in definition modules, but qualified identifiers cannot be imported from a (definition) module.</p>
<h3 style="background-color:#9999FF;"><a id="_D.1.2">D.1.2 Uniqueness typing additions</a></h3>
<p></p><table style="width:100%;"><tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">Updates of unique array elements:</td></tr>
</table>
<p style="text-align:justify;">A unique array element of a (unique) array of unique elements can be selected and updated, if the selection (using <span style="font-family:courier;">![ ]</span>) and update (with the same index) occur in the same function and the array is not used in between (only the selected element is used).</p>
<p style="text-align:justify;">For example, below a unique row is selected, updated by <span style="font-family:courier;">inc_a</span> and finally the row of the array is updated.</p>
<p></p>
<p style="font-family:courier;margin:0px;background-color:#FFFF99;line-height:1.125;">inc_row&nbsp;::&nbsp;!*{#*{#Int}}&nbsp;!Int&nbsp;-&gt;&nbsp;*{#*{#Int}};<br>
inc_row&nbsp;a&nbsp;row_i<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;(row,a)&nbsp;=&nbsp;a![row_i];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row&nbsp;=&nbsp;inc_a&nbsp;0&nbsp;row;<br>
&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{a&nbsp;&amp;&nbsp;[row_i]=row};<br>
<br>
inc_a&nbsp;::&nbsp;!Int&nbsp;!*{#Int}&nbsp;-&gt;&nbsp;*{#Int};<br>
inc_a&nbsp;i&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;i&lt;size&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;(n,a)&nbsp;=&nbsp;a![i];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;&amp;&nbsp;[i]=n+1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;inc_a&nbsp;(i+1)&nbsp;a;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;a;<br><p></p>
<h3 style="background-color:#9999FF;"><a id="_D.1.3">D.1.3 Hierarchical modules</a></h3>
<p style="text-align:justify;">The module name can be used to specify the directory containing the module. In that case the module name is the list of folder names of the directory, separated by <span style="font-family:courier;">.</span>'s, followed by a <span style="font-family:courier;">.</span> and the file name. For example the implementation module <span style="font-family:courier;">X.Y.Z</span> is stored in file <span style="font-family:courier;">X/Y/Z.icl</span> (file <span style="font-family:courier;">Z.icl</span> in subfolder <span style="font-family:courier;">Y</span> of folder <span style="font-family:courier;">Z</span>). The path containing the first folder (<span style="font-family:courier;">X</span> in this case) should be a module search path for the compiler.</p>
<h2 style="background-color:#9999FF;"><a id="_D.2">D.2 Clean Development Compiler Extensions</a></h2>
<table style="border-spacing:0;width:100%;"><tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">type GenericInfo (in module StdGeneric) changed.</td></tr>
<tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">generic instances of generic representation types (e.g. CONS) may occur in definition modules.</td></tr>
<tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">builtin Maybe types added (?, ?^, ?# with constructors ?Just, ?None, ?^Just, ?^None, ?#Just, ?#None).</td></tr>
</table>
<h2 style="background-color:#9999FF;"><a id="_D.3">D.3 Clean ITask Compiler Extensions</a></h2>
<table style="border-spacing:0;width:100%;"><tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">Function arguments may have contexts with universally quantified type variables.</td></tr>
<tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">Constructors may have contexts (for normal and universally quantified type variables).</td></tr>
<tr><td style="vertical-align:top;width:30px;"><table style="border-top:7px solid white;border-bottom:1px solid white;border-left:0px solid white;border-right:8px solid white;width:16px;height:16px;background:#FFCC99;float:left"></table>
</td><td style="text-align:justify;">dynamic types may have contexts.</td></tr>
</table>
</body>
</html>
